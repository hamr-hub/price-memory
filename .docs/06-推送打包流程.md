# 推送与打包流程

## 一键推送脚本
- Windows 使用 `scripts/oneclick-push.ps1`
- Linux/macOS 使用 `scripts/oneclick-push.sh`

## 使用示例（Windows）
```
pwsh -File scripts/oneclick-push.ps1
pwsh -File scripts/oneclick-push.ps1 -Message "feat: 更新价格追踪逻辑"
pwsh -File scripts/oneclick-push.ps1 -NoBuild
pwsh -File scripts/oneclick-push.ps1 -DryRun
```

## 使用示例（Linux/macOS）
```
chmod +x scripts/oneclick-push.sh
DRYRUN=1 ./scripts/oneclick-push.sh
MESSAGE="fix: 修复前端样式" ./scripts/oneclick-push.sh
NOBUILD=1 ./scripts/oneclick-push.sh
```

## 脚本行为
- 自动初始化并更新 Git 子模块
- 遍历 `.gitmodules` 中的每个模块
- 前端模块检测到 `package.json` 时执行构建
- Python 模块检测到 `requirements.txt` 时安装依赖
- 对各模块有变更时自动 `add/commit/pull --rebase/push`
- 根仓库更新子模块引用后自动提交与推送

## 参数说明
- Windows `-Message`: 提交信息
- Windows `-NoBuild`: 跳过构建
- Windows `-DryRun`: 仅打印将执行的命令
- Linux/macOS 通过环境变量 `MESSAGE`、`NOBUILD`、`DRYRUN` 控制

## 注意事项
- 需要本机已安装并配置 `git`
- 前端构建需安装 `npm`/`node`
- Python 模块依赖安装需安装 `python` 与 `pip`
- 如遇冲突或拉取失败，脚本会停止，按提示处理后重试

